Roads_sphinx
============

search api and possible web wrapper for some kind of search

### add - добавление

**Входные параметры:**

{ "index":"people", "items":[ {"id":123, "surname":"Иванов", "name":"Иван"}, .... ] }

 - index* - имя используемого индекса
 - items* - массив новых записей
      
**Выходные параметры:**

{ "result":"OK" }
 - успешность выполнения

### find - поиск записей
**Входные параметры:**

{ "index":"people", "start":"0", "count":"50", "fields":{ "rank":"сержант", "birth_date":"1922" } }

 - index* - имя используемого индекса
 - start  Порядковый номер первой записи
 - count  количество записей
 - fields значения поисковых полей
      
**Выходные параметры:**

{ "result":"OK", "ids":[123,124,2345] }
 - успешность выполнения
 - массив найденных идентификаторов
  
### update - изменение

**Входные параметры:**

{ "index":"people", "items":[ {"id":123, "surname":"Иванов", "name":"Иван"}, .... ] }

 - index* - имя используемого индекса
 - items* - массив новых записей
      
**Выходные параметры:**

{ "result":"OK" }
 - result - успешность выполнения

### delete - удаление

**Входные параметры:**

{ "index":"people", "ids":[123,124,2345] }

 - index* - имя используемого индекса
 - ids* - массив идентификаторов

**Выходные параметры:**

{ "result":"OK" }

 - Удачность операции

### get_index - запрос параметров индекса

**Входные параметры:**

{ "index":"people" }

 - index* - имя используемого индекса
 
**Выходные параметры:**

{ "result":"OK", "fields":[ {"name":"surname","type":"string"}, {"name":"name","type":"string"} ] }
 
 - result - успешность выполнения: успешно / ошибка / все нормально, но такого индекса нету
 - fields - описание полей

### change_index - изменение параметров индекса

**Входные параметры:**

{ "index":"people", "fields":[ {"name":"surname","type":"string"}, {"name":"name","type":"string"} ] }

 - index* - имя используемого индекса
 - fields - новое описание полей

**Выходные параметры:**

{ "result":"OK" }

 - Удачность операции

После запроса индекс пуст и должен быть заполнен заново. Сфинкс некоторое время недоступен в связи с перезапуском

#### * - обязательные параметры

